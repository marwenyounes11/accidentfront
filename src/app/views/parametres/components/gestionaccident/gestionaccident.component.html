
 <ng-template   #contentModalcol let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Gestion Accident Collision</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div  class="modal-body ">
    <form  [formGroup]="this.crudApi.dataForm1" (ngSubmit)="onSubmitCollision()">
      <div class="form-group">
        <label>Date Accident </label>
        <input type="date" class="form-control" formControlName="dateAccident" id="dateAccident"   [ngClass]="{ 'is-invalid': submitted && f1.dateAccident.errors }" />
        <div *ngIf="submitted && f1.dateAccident.errors" class="invalid-feedback">
            <div *ngIf="f1.dateAccident.errors.required"> date is required</div>
        </div>
      </div>
      <div class="form-group">
        <label>heure Accident </label>
        <input type="time" class="form-control" formControlName="heureAccident" id="heureAccident"   [ngClass]="{ 'is-invalid': submitted && f1.heureAccident.errors }" />
        <div *ngIf="submitted && f1.heureAccident.errors" class="invalid-feedback">
            <div *ngIf="f1.heureAccident.errors.required"> heure is required</div>
            <div *ngIf="f1.heureAccident.errors.time"> heure doit etre en time </div>
        </div>
      </div>
      <div class="form-group">
        <label>Description </label>
        <textarea class="form-control" formControlName="description" id="description"   [ngClass]="{ 'is-invalid': submitted && f1.description.errors }"></textarea>
        <div *ngIf="submitted && f1.description.errors" class="invalid-feedback">
            <div *ngIf="f1.description.errors.required"> Description is required</div>
            <div *ngIf="f1.description.errors.regex"> Description doit etre en alphabétique </div>
        </div>
      </div>
      <div class="form-group">
          <label>File Upload  </label>
              <input type="file" accept="image/*" (change)="onSelectFile1($event)">
              <img [src]="imgURL" height="200" *ngIf="imgURL">
      </div>
      <div class="form-group" id="e1">
        <label> lieux </label>
        <select id="idlieux" formControlName="idlieux" class="form-control" [ngClass]="{ 'is-invalid': submitted && f1.idlieux.errors }">
          <option *ngFor="let l of  lieuxAccidents" [value]="l.id">{{l.emplacement}}</option>
        </select>
        <div *ngIf="submitted && f1.idlieux.errors" class="invalid-feedback">
          <div *ngIf="f1.idlieux.errors.required">Idlieux is required</div>
      </div>
    </div>
    
      <div class="form-group" >
        <label>sous type accident </label>
        <select id="subType" formControlName="subType" class="form-control" [ngClass]="{ 'is-invalid': submitted && f1.subType.errors }">
          <option value="collision bus">
            collision bus
          </option>
          <option value="collision metros">
            collision metros
          </option>
          <option value="collision tgm">
            collision tgm
          </option>
        </select>
        <div *ngIf="submitted && f1.subType.errors" class="invalid-feedback">
          <div *ngIf="f1.subType.errors.required">sub Type is required</div>
      </div>
    </div>
      <div class="form-group">
        <button type="submit" class="btn btn-dark"><i class="fa fa-database"></i> Submit</button>
        <button type="reset" class="btn btn-dark" (click)="ResetForm()">Annuler</button>
      </div>
    </form>
  </div>
</ng-template>

<ng-template   #contentModalrout let-modal>
<div class="modal-header">
<h4 class="modal-title" id="modal-basic-title">Gestion Accident Route</h4>
<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('')">
  <span aria-hidden="true">&times;</span>
</button>
</div>
<div  class="modal-body ">
<form  [formGroup]="this.crudApi.dataForm2" (ngSubmit)="onSubmitRoute()">
  <div class="form-group">
    <label>Date Accident </label>
    <input type="date" class="form-control" formControlName="dateAccident" id="dateAccident"   [ngClass]="{ 'is-invalid': submitted && f2.dateAccident.errors }" />
    <div *ngIf="submitted && f2.dateAccident.errors" class="invalid-feedback">
        <div *ngIf="f2.dateAccident.errors.required"> date is required</div>
    </div>
  </div>
  <div class="form-group">
    <label>heure Accident </label>
    <input type="time" class="form-control" formControlName="heureAccident" id="heureAccident"   [ngClass]="{ 'is-invalid': submitted && f2.heureAccident.errors }" />
    <div *ngIf="submitted && f2.heureAccident.errors" class="invalid-feedback">
        <div *ngIf="f2.heureAccident.errors.required"> heure is required</div>
        <div *ngIf="f2.heureAccident.errors.time"> heure doit etre en time </div>
    </div>
  </div>
  <div class="form-group">
    <label>Description </label>
    <textarea class="form-control" formControlName="description" id="description"   [ngClass]="{ 'is-invalid': submitted && f2.description.errors }"></textarea>
    <div *ngIf="submitted && f2.description.errors" class="invalid-feedback">
        <div *ngIf="f2.description.errors.required"> Description is required</div>
        <div *ngIf="f2.description.errors.regex"> Description doit etre en alphabétique </div>
    </div>
  </div>
  <div class="form-group">
      <label>File Upload  </label>
          <input type="file" accept="image/*" (change)="onSelectFile2($event)">
          <img [src]="imgURL" height="200" *ngIf="imgURL">
  </div>
  <div class="form-group" id="e1">
    <label> lieux </label>
    <select id="idlieux" formControlName="idlieux" class="form-control" [ngClass]="{ 'is-invalid': submitted && f2.idlieux.errors }">
      <option *ngFor="let l of  lieuxAccidents" [value]="l.id">{{l.emplacement}}</option>
    </select>
    <div *ngIf="submitted && f2.idlieux.errors" class="invalid-feedback">
      <div *ngIf="f2.idlieux.errors.required">Idlieux is required</div>
  </div>
</div>

  <div class="form-group" >
    <label>sous type accident </label>
    <select id="subType" formControlName="subType" class="form-control" [ngClass]="{ 'is-invalid': submitted && f2.subType.errors }">
      <option value="casser verre">
        casser verre
      </option>
      <option value="agression">
        agression 
      </option>
      <option value="vandalisme">
        vandalisme
      </option>
      <option value="glissage">
        glissage
      </option>
    </select>
    <div *ngIf="submitted && f2.subType.errors" class="invalid-feedback">
      <div *ngIf="f2.subType.errors.required">sub Type is required</div>
  </div>
</div>
  <div class="form-group">
    <button type="submit" class="btn btn-dark"><i class="fa fa-database"></i> Submit</button>
    <button type="reset" class="btn btn-dark" (click)="ResetForm()">Annuler</button>
  </div>
</form>
</div>
</ng-template>

<ng-template   #contentModaltrav let-modal>
<div class="modal-header">
<h4 class="modal-title" id="modal-basic-title">Gestion Accident Travail</h4>
<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('')">
  <span aria-hidden="true">&times;</span>
</button>
</div>
<div  class="modal-body ">
<form  [formGroup]="this.crudApi.dataForm3" (ngSubmit)="onSubmitTravail()">
  <div class="form-group">
    <label>Date Accident </label>
    <input type="date" class="form-control" formControlName="dateAccident" id="dateAccident"   [ngClass]="{ 'is-invalid': submitted && f3.dateAccident.errors }" />
    <div *ngIf="submitted && f3.dateAccident.errors" class="invalid-feedback">
        <div *ngIf="f3.dateAccident.errors.required"> date is required</div>
    </div>
  </div>
  <div class="form-group">
    <label>heure Accident </label>
    <input type="time" class="form-control" formControlName="heureAccident" id="heureAccident"   [ngClass]="{ 'is-invalid': submitted && f3.heureAccident.errors }" />
    <div *ngIf="submitted && f3.heureAccident.errors" class="invalid-feedback">
        <div *ngIf="f3.heureAccident.errors.required"> heure is required</div>
        <div *ngIf="f3.heureAccident.errors.time"> heure doit etre en time </div>
    </div>
  </div>
  <div class="form-group">
    <label>Description </label>
    <textarea class="form-control" formControlName="description" id="description"   [ngClass]="{ 'is-invalid': submitted && f3.description.errors }"></textarea>
    <div *ngIf="submitted && f3.description.errors" class="invalid-feedback">
        <div *ngIf="f3.description.errors.required"> Description is required</div>
        <div *ngIf="f3.description.errors.regex"> Description doit etre en alphabétique </div>
    </div>
  </div>
  <div class="form-group">
      <label>File Upload  </label>
          <input type="file" accept="image/*" (change)="onSelectFile3($event)">
          <img [src]="imgURL" height="200" *ngIf="imgURL">
  </div>
  <div class="form-group" id="e1">
    <label> lieux </label>
    <select id="idlieux" formControlName="idlieux" class="form-control" [ngClass]="{ 'is-invalid': submitted && f3.idlieux.errors }">
      <option *ngFor="let l of  lieuxAccidents" [value]="l.id">{{l.emplacement}}</option>
    </select>
    <div *ngIf="submitted && f3.idlieux.errors" class="invalid-feedback">
      <div *ngIf="f3.idlieux.errors.required">Idlieux is required</div>
  </div>
</div>

  <div class="form-group" >
    <label>sous type accident </label>
    <select id="subType" formControlName="subType" class="form-control" [ngClass]="{ 'is-invalid': submitted && f3.subType.errors }">
      <option value="casser verre">
        casser verre
      </option>
      <option value="agression">
        agression 
      </option>
      <option value="vandalisme">
        vandalisme
      </option>
      <option value="glissage">
        glissage
      </option>
    </select>
    <div *ngIf="submitted && f3.subType.errors" class="invalid-feedback">
      <div *ngIf="f3.subType.errors.required">sub Type is required</div>
  </div>
</div>
  <div class="form-group">
    <button type="submit" class="btn btn-dark"><i class="fa fa-database"></i> Submit</button>
    <button type="reset" class="btn btn-dark" (click)="ResetForm()">Annuler</button>
  </div>
</form>
</div>
</ng-template>
<ngb-tabset>
  <ngb-tab title="Accident Collision">
    <ng-template ngbTabContent>
      <div class="list row">
        <div class="col-md-8">
          <div class="input-group mb-3">
            <input
              type="text"
              class="form-control"
              placeholder="recherche par sous type accident"
              [(ngModel)]="motcle1"
            />
            <div class="input-group-append">
              <button
                class="btn btn-outline-secondary"
                type="button"
                (click)="retrieveAccidentCollisionMc()"
              >
                Search
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="l" fxFlex fxLayout fxLayoutAlign="end" fxHide.xs>
        <a class="btn btn-sm btn-success text-white pull-right" (click)="openCollision(contentModalcol)">
            <i class="fa fa-plus"></i>Add Accident Collision  </a>
     </div>
    <table class="table table-bordered table-responsive-sm table-responsive-md
   table-responsive-lg t">
    <thead>
    <tr>
    <th scope="col">Date Accident </th>
    <th scope="col">Heure Accident </th>
    <th scope="col">Description</th>
    <th scope="col">Image </th>
    <th scope="col">id lieux</th>
    <th scope="col">sous type accident </th>
    <th colspan="2">
      Action
    </th>
    </tr>
    </thead>
    <tbody>


    <tr  *ngFor="let item of accidentcollisions | paginate: { itemsPerPage: pageSize1,
      currentPage: page1,
      totalItems: count1 }">
    
    <td>{{item.dateAccident}}</td>
    <td>{{item.heureAccident}}</td>
    <td>{{item.description}}</td>
    <td>
        <a href="#"><img *ngIf="item.image" class="card-img-top img-responsive"
        src = "data:image/{{item.extension}};base64,{{item.image}}" 
        style = "height :200px;width:fil-content"
       alt=""></a>
    </td>
    <td>{{item.lieux.id}}</td>
    <td>{{item.subType}}</td>
    <td><button class="btn btn-warning btn btn-outline-dark ml-1"  (click) = "selectCollision(item.id,contentModalcol)" >
      <i class="fa fa-pencil-square-o" ></i></button></td>
   <td><button class="btn btn-danger btn btn-outline-dark ml-1" (click) = "removeDataCollision(item.id)">
      <i class="fa fa-trash-o"></i></button></td>
       </tr>
         </tbody>
         </table>
         <div class="col-md-12">
          <pagination-controls
            previousLabel="Prev"
            nextLabel="Next"
            responsive="true"
            (pageChange)="handlePageChange1($event)"
          ></pagination-controls>
        </div>
        <div class="mt-3">
          ...
      
          Items per Page:
          <select (change)="handlePageSizeChange1($event)">
            <option *ngFor="let size of pageSizes" [value]="size">
              {{ size }}
            </option>
          </select>
        </div>
        </ng-template>
      </ngb-tab>
      <ngb-tab title="Accident Route">
        <ng-template ngbTabContent>
          <div class="list row">
            <div class="col-md-8">
              <div class="input-group mb-3">
                <input
                  type="text"
                  class="form-control"
                  placeholder="recherche par sous type accident"
                  [(ngModel)]="motcle2"
                />
                <div class="input-group-append">
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    (click)="retrieveAccidentRouteMc()"
                  >
                    Search
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="l" fxFlex fxLayout fxLayoutAlign="end" fxHide.xs>
            <a class="btn btn-sm btn-success text-white pull-right" (click)="openRoute(contentModalrout)">
                <i class="fa fa-plus"></i>Add Accident Route</a>
         </div>
         <table class="table table-bordered table-responsive-sm table-responsive-md
         table-responsive-lg t">
          <thead>
          <tr>
          <th scope="col">Date Accident </th>
          <th scope="col">Heure Accident </th>
          <th scope="col">Description</th>
          <th scope="col">Image </th>
          <th scope="col">id lieux</th>
          <th scope="col">sous type accident </th>
          <th colspan="2">
            Action
          </th>
          </tr>
          </thead>
          <tbody>
      
      
          <tr  *ngFor="let item of accidentroutes | paginate: { itemsPerPage: pageSize2,
            currentPage: page2,
            totalItems: count2 }">
          
          <td>{{item.dateAccident}}</td>
          <td>{{item.heureAccident}}</td>
          <td>{{item.description}}</td>
          <td>
            <a href="#"><img *ngIf="item.image" class="card-img-top img-responsive"
              src = "data:image/{{item.extension}};base64,{{item.image}}" 
              style = "height :200px;width:fil-content"
             alt=""></a>
          </td>
          <td>{{item.lieux.id}}</td>
          <td>{{item.subType}}</td>
          <td><button class="btn btn-warning btn btn-outline-dark ml-1"  (click) = "selectRoute(item.id,contentModalrout)" >
            <i class="fa fa-pencil-square-o" ></i></button></td>
         <td><button class="btn btn-danger btn btn-outline-dark ml-1" (click) = "removeDataRoute(item.id)">
            <i class="fa fa-trash-o"></i></button></td>
             </tr>
               </tbody>
               </table>
               <div class="col-md-12">
                <pagination-controls
                  previousLabel="Prev"
                  nextLabel="Next"
                  responsive="true"
                  (pageChange)="handlePageChange2($event)"
                ></pagination-controls>
              </div>
              <div class="mt-3">
                ...
            
                Items per Page:
                <select (change)="handlePageSizeChange2($event)">
                  <option *ngFor="let size of pageSizes" [value]="size">
                    {{ size }}
                  </option>
                </select>
              </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab title="Accident Travail">
              <ng-template ngbTabContent>
                <div class="list row">
                  <div class="col-md-8">
                    <div class="input-group mb-3">
                      <input
                        type="text"
                        class="form-control"
                        placeholder="recherche par sous type accident"
                        [(ngModel)]="motcle3"
                      />
                      <div class="input-group-append">
                        <button
                          class="btn btn-outline-secondary"
                          type="button"
                          (click)="retrieveAccidentTravailMc()"
                        >
                          Search
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="l" fxFlex fxLayout fxLayoutAlign="end" fxHide.xs>
                  <a class="btn btn-sm btn-success text-white pull-right" (click)="openTravail(contentModaltrav)">
                      <i class="fa fa-plus"></i>Accident Travail</a>
               </div>
               <table class="table table-bordered table-responsive-sm table-responsive-md
   table-responsive-lg t">
    <thead>
    <tr>
    <th scope="col">Date Accident </th>
    <th scope="col">Heure Accident </th>
    <th scope="col">Description</th>
    <th scope="col">Image </th>
    <th scope="col">id lieux</th>
    <th scope="col">sous type accident </th>
    <th colspan="2">
      Action
    </th>
    </tr>
    </thead>
    <tbody>


    <tr  *ngFor="let item of accidenttravails | paginate: { itemsPerPage: pageSize3,
      currentPage: page3,
      totalItems: count3 }">
    
    <td>{{item.dateAccident}}</td>
    <td>{{item.heureAccident}}</td>
    <td>{{item.description}}</td>
    <td>
      <a href="#"><img *ngIf="item.image" class="card-img-top img-responsive"
        src = "data:image/{{item.extension}};base64,{{item.image}}" 
        style = "height :200px;width:fil-content"
       alt=""></a>
    </td>
    <td>{{item.lieux.id}}</td>
    <td>{{item.subType}}</td>
    <td><button class="btn btn-warning btn btn-outline-dark ml-1"  (click) = "selectTravail(item.id,contentModaltrav)" >
      <i class="fa fa-pencil-square-o" ></i></button></td>
   <td><button class="btn btn-danger btn btn-outline-dark ml-1" (click) = "removeDataTravail(item.id)">
      <i class="fa fa-trash-o"></i></button></td>
       </tr>
         </tbody>
         </table>
         <div class="col-md-12">
          <pagination-controls
            previousLabel="Prev"
            nextLabel="Next"
            responsive="true"
            (pageChange)="handlePageChange3($event)"
          ></pagination-controls>
        </div>
        <div class="mt-3">
          ...
      
          Items per Page:
          <select (change)="handlePageSizeChange3($event)">
            <option *ngFor="let size of pageSizes" [value]="size">
              {{ size }}
            </option>
          </select>
        </div>
        </ng-template>
      </ngb-tab>
    </ngb-tabset>